<view class="page-root">
  <saving-toast id="savingToast" />
  <scroll-view class="page-scroll" scroll-y="true" enhanced="{{true}}" show-scrollbar="{{false}}">
    <!-- 根据当前主题渲染不同的预览组件 -->
    <amber-preview id="quotePreview" wx:if="{{!currentTheme || currentTheme === 'amber'}}" quote-detail="{{quoteDetail}}" parent-view-mode="preview" />
    <moonlight-preview id="quotePreview" wx:if="{{currentTheme === 'moonlight'}}" quote-detail="{{quoteDetail}}" parent-view-mode="preview" />
    <neon-preview id="quotePreview" wx:if="{{currentTheme === 'neon'}}" quote-detail="{{quoteDetail}}" parent-view-mode="preview" />
    <sky-preview id="quotePreview" wx:if="{{currentTheme === 'sky'}}" quote-detail="{{quoteDetail}}" parent-view-mode="preview" />
  </scroll-view>
  <view class="bottom-dialog-mask {{bottomDialogExpanded ? 'visible' : 'hidden'}}" bindtap="toggleBottomDialog" catchtouchmove="onBottomDialogMaskTouchMove"></view>
  <view
    class="bottom-dialog {{bottomDialogExpanded ? 'expanded' : 'collapsed'}}"
    style="height: {{options.bottomDialogExpandedHeight}}vh; transform: {{bottomDialogExpanded ? 'none' : ('translateY(' + (options.bottomDialogExpandedHeight - options.bottomDialogCollapsedHeight) + 'vh)')}};"
    catchtouchmove="onBottomDialogMaskTouchMove"
  >
    <view class="bottom-dialog-header" bindtap="toggleBottomDialog" bindtouchstart="onBottomDialogHeaderTouchStart" bindtouchend="onBottomDialogHeaderTouchEnd">
      <view class="bottom-dialog-handle"></view>
    </view>
    <!-- 编辑索引页 -->
    <edit-index wx:if="{{!showEditEnd}}" bottom-dialog-expanded="{{bottomDialogExpanded}}" bind:quoteDetailUpdate="onQuoteDetailUpdate" bind:toggleConfirmDialog="toggleConfirmDialog" bind:toggleBottomDialog="toggleBottomDialog" />
    <!-- 编辑结束页 -->
    <edit-end wx:else bind:toggleConfirmDialog="toggleConfirmDialog" />
  </view>
</view>
