<view class="page-root">
  <scroll-view class="page" scroll-y>
    <view class="quote-container">
      <view class="quote-header">
        <!-- <image class="client-logo" src="{{client.logoUrl}}" mode="aspectFit" /> -->
        <view class="header-right">
          <text class="client-name">{{client.name}}</text>
          <text class="quote-title">服务报价单</text>
        </view>
      </view>

      <view
        class="quote-section"
        wx:for="{{pricingItems}}"
        wx:for-item="category"
        wx:key="name"
      >
        <view class="section-title">{{category.name}}</view>
        <view class="section-table">
          <view class="table-row table-header">
            <text class="col-name">项目</text>
            <text class="col-unit-price">单价</text>
            <text class="col-quantity">数量</text>
            <text class="col-delivery">周期</text>
          </view>
          <view
            class="table-row"
            wx:for="{{category.items}}"
            wx:for-item="service"
            wx:key="name"
          >
            <text class="col-name">{{service.name}}</text>
            <text class="col-unit-price"
              >{{service.unitPrice}} 元/{{service.unit}}</text
            >
            <text class="col-quantity">{{service.quantity}}</text>
            <text class="col-delivery"
              >{{service.deliveryPeriodDays > 0 ? service.deliveryPeriodDays +
              ' 天' : '待定'}}</text
            >
          </view>
        </view>
      </view>

      <view class="quote-section">
        <view class="section-title">服务流程与付款</view>
        <view class="section-body">
          <text class="section-text"
            >定金比例：{{serviceProcess.depositRatio * 100}}%</text
          >
          <text class="section-text"
            >尾款比例：{{serviceProcess.finalPaymentRatio * 100}}%</text
          >
          <text class="section-text"
            >整体预计工期：{{overallDeliveryPeriodDays}} 天</text
          >
        </view>
      </view>

      <view class="quote-section" wx:if="{{serviceTerms}}">
        <view class="section-title">服务条款</view>
        <view class="section-body">
          <text class="section-text">{{serviceTerms}}</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <view
    class="bottom-dialog {{bottomDialogExpanded ? 'expanded' : 'collapsed'}}"
  >
    <view class="bottom-dialog-header" bindtap="toggleBottomDialog">
      <view class="bottom-dialog-handle"></view>
    </view>
    <view class="bottom-dialog-body">
      <view class="action-bar">
        <button class="action-btn secondary">保存图片</button>
        <button class="action-btn primary">发送报价单</button>
      </view>
    </view>
  </view>
</view>
