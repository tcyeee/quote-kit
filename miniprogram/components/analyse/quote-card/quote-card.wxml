<view class="quote-card {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? 'quote-card--offlined' : ''}} {{showMoreMenu ? 'quote-card--active' : ''}}">
  <view class="quote-card__body">
    <!-- Title Section -->
    <view class="quote-card__title-section">
      <view class="quote-card__title">{{item.quote.projectName}}</view>
      <view class="quote-card__status-badge {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? 'quote-card__status-badge--offlined' : 'quote-card__status-badge--online'}}">
        {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? '已下架' : '展示中'}}
      </view>
    </view>
    <!-- Header: Status and Actions -->
    <view class="quote-card__header">
      <view class="quote-card__stat-compact">
        <view class="quote-card__stat-label">阅读量</view>
        <view class="quote-card__stat-value">{{item.viewCountDisplay}}</view>
      </view>
      <view class="quote-card__actions">
        <button class="quote-card__action-btn {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? 'quote-card__action-btn--disabled' : ''}}" bindtap="onPreviewTap" disabled="{{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined}}">
          <span class="icon--eye icon-size-18"></span>
        </button>
        <button class="quote-card__action-btn {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? 'quote-card__action-btn--disabled' : ''}}" open-type="share" data-quote-id="{{item.quoteId}}" disabled="{{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined}}">
          <span class="icon--share icon-size-18"></span>
        </button>
        <view class="quote-card__more-wrapper">
          <button class="quote-card__action-btn" bindtap="onMoreTap">
            <span class="icon--more icon-size-18"></span>
          </button>
          <view wx:if="{{showMoreMenu}}" class="quote-card__menu">
            <view wx:if="{{!(item.quote.shareDate && item.quote.shareDate.isManuallyOfflined)}}" class="quote-card__menu-item" bindtap="onOfflineTap">
              <text class="icon--eye-off icon-size-18"></text>
              <text>下架报价</text>
            </view>
            <view wx:if="{{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined}}" class="quote-card__menu-item" bindtap="onOnlineTap">
              <text class="icon--recycle icon-size-18"></text>
              <text>重新上架</text>
            </view>
            <view class="quote-card__menu-item quote-card__menu-item--danger" bindtap="onDeleteTap">
              <text class="icon--delete-16-regular icon-size-18"></text>
              <text>删除报价</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    <!-- Menu Backdrop -->
    <view wx:if="{{showMoreMenu}}" class="quote-card__menu-backdrop" bindtap="onCloseMenu"></view>
    <!-- Footer -->
    <view class="quote-card__footer">
      <view class="quote-card__creation-date">有效期至 {{item.expireTimeText || '—'}}</view>
      <button class="quote-card__detail-link" bindtap="onToggleViewLogTap">
        {{showViewLog ? '收起' : '查看阅读详情'}}
      </button>
    </view>
    <!-- View Log (Expanded) -->
    <view wx:if="{{showViewLog && item.viewLogTop10 && item.viewLogTop10.length}}" class="quote-card__view-log">
      <view class="quote-card__view-log-header">最近阅读记录</view>
      <view class="quote-card__view-log-list">
        <block wx:for="{{item.viewLogTop10}}" wx:for-item="log" wx:for-index="logIndex" wx:key="logIndex">
          <view class="quote-card__view-log-item">
            <view class="quote-card__view-log-marker">
              <view class="quote-card__view-log-dot"></view>
              <view wx:if="{{logIndex < item.viewLogTop10.length - 1}}" class="quote-card__view-log-line"></view>
            </view>
            <text class="quote-card__view-log-text">{{log.displayText}}</text>
          </view>
        </block>
      </view>
    </view>
  </view>
</view>