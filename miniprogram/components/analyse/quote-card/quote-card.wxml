<view class="analyse-card-row {{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined ? 'analyse-card-row--offlined' : ''}}">
  <view class="analyse-card-header">
    <view class="analyse-card-title-row">
      <view class="analyse-card-title">{{item.quote.projectName}}</view>
      <view wx:if="{{item.quote.shareDate && item.quote.shareDate.isManuallyOfflined}}" class="analyse-chip analyse-chip--offlined">
        已下架
      </view>
      <view wx:else class="analyse-chip analyse-chip--online">进行中</view>
    </view>
    <view class="analyse-card-subtitle">
      分享时间：{{item.shareTimeText || '—'}} · 截止时间：{{item.expireTimeText || '—'}}
    </view>
  </view>
  <view class="analyse-metrics">
    <view class="analyse-metric">
      <view class="analyse-metric-label">总金额</view>
      <view class="analyse-metric-value">{{item.quote.computeData.totalAmount}} 元</view>
    </view>
    <view class="analyse-metric">
      <view class="analyse-metric-label">阅读次数</view>
      <view class="analyse-metric-value">{{item.viewCountDisplay}}</view>
    </view>
  </view>
  <view class="analyse-card-footer">
    <view class="analyse-card-footer-left">
      <span class="icon--delete-16-regular icon-size-10 icon-color-error analyse-delete-icon" bindtap="onDeleteTap"></span>
    </view>
    <view class="analyse-actions">
      <block wx:if="{{!(item.quote.shareDate && item.quote.shareDate.isManuallyOfflined)}}">
        <button size="mini" class="analyse-action-button" bindtap="onOfflineTap">下架</button>
        <button size="mini" class="analyse-action-button" bindtap="onPreviewTap">预览</button>
        <button size="mini" class="analyse-action-button" open-type="share" data-quote-id="{{item.quoteId}}">
          重新分享
        </button>
        <button size="mini" class="analyse-action-button" bindtap="onToggleViewLogTap">
          {{showViewLog ? '收起阅读记录' : '展开阅读记录'}}
        </button>
      </block>
      <block wx:else>
        <view class="analyse-actions-status">已下架</view>
      </block>
    </view>
  </view>
  <view wx:if="{{showViewLog && item.viewLogTop10 && item.viewLogTop10.length}}" class="analyse-view-log">
    <view class="analyse-view-log-header">阅读记录</view>
    <view class="analyse-view-log-list">
      <block wx:for="{{item.viewLogTop10}}" wx:for-item="log" wx:for-index="logIndex" wx:key="logIndex">
        <view class="analyse-view-log-item">
          <text class="analyse-view-log-bullet">•</text>
          <text class="analyse-view-log-text">{{log.displayText}}</text>
        </view>
      </block>
    </view>
  </view>
</view>