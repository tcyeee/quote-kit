<view class="page">
  <view class="quote-container">
    <view class="page-header">
      <text class="page-title">报价明细</text>
      <text class="page-subtitle">Quotation Details</text>
    </view>
    <view class="category-section" wx:for="{{quoteDetail.pricingItems}}" wx:for-item="category" wx:key="name">
      <view class="category-header">
        <view class="category-header-left">
          <view class="category-indicator"></view>
          <text class="category-title">{{category.name}}</text>
        </view>
        <text class="category-subtotal">小计：¥{{category.computeData.amount || 0}}</text>
      </view>
      <view class="category-card">
        <view class="category-item-row" wx:for="{{category.items}}" wx:for-item="service" wx:key="name">
          <view class="item-main">
            <text class="item-title">{{service.name}}</text>
            <view class="item-meta">
              <text class="item-meta-text">{{service.quantity}}{{service.unit}} ·</text>
              <text class="item-meta-text" wx:if="{{service.deliveryPeriodDays <= 0}}">周期待定</text>
              <text class="item-meta-text" wx:else>{{service.deliveryPeriodDays}} 天</text>
            </view>
          </view>
          <view class="item-unit">
            <text class="item-unit-label">单价</text>
            <text class="item-unit-value">¥{{service.unitPrice}}</text>
          </view>
          <view class="item-amount">
            <text class="item-amount-value">¥{{service.unitPrice * service.quantity}}</text>
          </view>
        </view>
      </view>
    </view>
    <view wx:if="{{quoteDetail.serviceTerms}}" class="remark-section">
      <view class="remark-header">
        <view class="category-indicator"></view>
        <text class="category-title">备注</text>
      </view>
      <view class="remark-card">
        <text class="remark-text">{{quoteDetail.serviceTerms}}</text>
      </view>
    </view>
    <view wx:if="{{totalAmount}}" class="summary-card">
      <view class="summary-row">
        <text class="summary-label">项目总计</text>
        <text class="summary-value">¥{{totalAmount}}</text>
      </view>
    </view>
  </view>
</view>