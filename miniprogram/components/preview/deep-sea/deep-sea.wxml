<view class="page">
  <view class="quote-container">
    <view wx:if="{{quoteDetail.domain.name}}" class="quote-brand">{{quoteDetail.domain.name}}</view>
    <view class="quote-header">
      <view class="header-left">
        <view class="quote-meta">
          <text class="quote-title">报价单</text>
          <text class="quote-subtitle">服务方案与费用说明</text>
        </view>
      </view>
      <view wx:if="{{quoteDetail.clientName}}" class="header-right">
        <text class="client-label">致</text>
        <text class="client-name">{{quoteDetail.clientName}}</text>
      </view>
    </view>
    <view class="quote-section" wx:for="{{quoteDetail.pricingItems}}" wx:for-item="category" wx:key="name">
      <view class="section-title">{{category.name}}</view>
      <view class="section-table">
        <view class="table-row table-header">
          <text class="col-name">项目</text>
          <text class="col-unit-price">单价</text>
          <text class="col-quantity">数量</text>
          <text class="col-delivery">周期</text>
        </view>
        <view class="table-row" wx:for="{{quoteDetail.theme ? category.items : quoteDetail.pricingItems}}" wx:for-item="service" wx:key="name">
          <text class="col-name">{{service.name}}</text>
          <text class="col-unit-price">{{service.unitPrice}} 元/{{service.unit}}</text>
          <text class="col-quantity">{{service.quantity}}</text>
          <text wx:if="{{ service.deliveryPeriodDays <= 0 }}" class="col-delivery">待定</text>
          <text wx:else class="col-delivery">{{ service.deliveryPeriodDays }} 天</text>
        </view>
      </view>
    </view>
    <view class="quote-section">
      <view class="section-title">支付节点</view>
      <view class="section-body">
        <view class="pay-nodes-list">
          <view class="pay-node-card" wx:for="{{quoteDetail.PayNodes}}" wx:for-item="node" wx:for-index="index" wx:key="nodeName">
            <view class="pay-node-header">
              <view class="pay-node-index">{{index + 1}}</view>
              <view class="pay-node-main">
                <view class="pay-node-title">{{node.nodeName}}</view>
                <view class="pay-node-meta">
                  <text class="pay-node-meta-ratio">{{node.nodeRatio * 100}}%</text>
                  <text wx:if="{{node.nodeDate}}" class="pay-node-meta-separator">·</text>
                  <text wx:if="{{node.nodeDate}}">{{node.nodeDate}}</text>
                </view>
              </view>
            </view>
          </view>
        </view>
        <text class="section-text pay-node-overall">
          整体预计工期：{{quoteDetail.overallDeliveryPeriodDays}} 天
        </text>
      </view>
    </view>
    <view class="quote-section" wx:if="{{quoteDetail.serviceTerms}}">
      <view class="section-title">备注</view>
      <view class="section-body">
        <text class="section-text">{{quoteDetail.serviceTerms}}</text>
      </view>
    </view>
  </view>
</view>

